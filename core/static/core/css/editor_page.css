/* ==========================================================================
   DESIGN SYSTEM V7 - EDITOR DE CORTES (CORREÇÃO DE LAYOUT E POLIMENTO)
   ========================================================================== */

/* --- LAYOUT GERAL --- */
.editor-layout {
    display: grid;
    /* Coluna do painel é flexível, com um mínimo de 380px e máximo de 420px */
    grid-template-columns: minmax(380px, 420px) 1fr;
    height: calc(100vh - var(--header-height, 80px));
    position: relative;
    gap: 30px;
    padding: 30px;
}

/* --- PAINEL DE CONTROLE --- */
.editor-panel {
    background: transparent;
    display: flex;
    flex-direction: column;
    z-index: 2;
}

.panel-content-wrapper {
    background: var(--color-background-alt);
    border: 1px solid var(--color-border);
    border-radius: 24px;
    box-shadow: var(--shadow-xl);
    padding: 28px;
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: all 0.3s ease;
}

[data-theme="light"] .panel-content-wrapper {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
}
[data-theme="dark"] .panel-content-wrapper {
    background: rgba(15, 23, 42, 0.7);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
}

.panel-header h2 {
    font-size: 1.6rem; font-weight: 800; margin: 0 0 24px 0;
    display: flex; align-items: center; gap: 12px;
    color: var(--color-text-dark);
}
.panel-header .icon { color: var(--color-primary); font-size: 1.8rem; }

.panel-form {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.form-content {
    flex-grow: 1;
    overflow-y: auto;
    padding-right: 15px;
    margin-right: -15px;
}

/* --- BARRA DE ROLAGEM --- */
.form-content::-webkit-scrollbar { width: 8px; }
.form-content::-webkit-scrollbar-track { background: transparent; }
.form-content::-webkit-scrollbar-thumb {
    background-color: var(--color-primary);
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: content-box;
}
.form-content::-webkit-scrollbar-thumb:hover { background-color: var(--color-primary-dark); }

/* --- ANIMAÇÃO DE TRANSIÇÃO DE PASSOS --- */
.form-step {
    display: none;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.4s ease-out, transform 0.4s ease-out;
}
.form-step.active {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

/* --- ESTILO DOS CAMPOS (PASSO 1) --- */
.url-input-group {
    position: relative;
    margin-top: 20px;
}
.url-input-group .form-input {
    padding-left: 45px;
    padding-top: 16px;
    padding-bottom: 16px;
    font-size: 1.05rem;
    background-color: var(--color-background);
}
.url-input-group .icon-prefix {
    position: absolute;
    top: 50%;
    left: 18px;
    transform: translateY(-50%);
    color: var(--color-text-light);
    font-size: 1.2rem;
    transition: color 0.3s ease;
}
.url-input-group .form-input:focus + .icon-prefix { color: var(--color-primary); }

/* --- BOTÕES --- */
.btn {
    display: inline-flex; align-items: center; justify-content: center;
    font-weight: 600; font-size: 1rem;
    padding: 14px 32px;
    border-radius: 12px;
    text-decoration: none; cursor: pointer; border: none;
    transition: all 0.2s ease;
    transform-style: preserve-3d;
    transform: translateY(0);
    gap: 10px;
}
.btn-primary {
    background: var(--gradient-primary);
    color: white;
    box-shadow: 0 6px 0 0 var(--color-primary-dark), 0 8px 15px rgba(0,0,0,0.2);
}
.btn-primary:hover:not(:disabled) { transform: translateY(2px); box-shadow: 0 4px 0 0 var(--color-primary-dark), 0 6px 12px rgba(0,0,0,0.25); }
.btn-primary:active:not(:disabled) { transform: translateY(4px); box-shadow: 0 2px 0 0 var(--color-primary-dark), 0 4px 8px rgba(0,0,0,0.3); }
.btn-full { width: 100%; }
.btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; box-shadow: none; }
.btn:disabled .fa-spin { animation: spin 1.5s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* --- LISTA DE SEGMENTOS (PASSO 2) --- */
.segments-deck {
    display: flex;
    flex-direction: column;
    gap: 10px; /* Espaço entre os itens */
    max-height: 250px; /* Altura máxima antes de scrollar */
    overflow-y: auto; /* Adiciona scroll se necessário */
    padding-right: 10px; /* Espaço para a barra de scroll */
    margin-bottom: 24px;
}

/* Estilo da barra de rolagem para a lista de segmentos */
.segments-deck::-webkit-scrollbar { width: 6px; }
.segments-deck::-webkit-scrollbar-track { background: transparent; }
.segments-deck::-webkit-scrollbar-thumb { background-color: var(--color-primary); border-radius: 3px; }

.segment-item {
    display: grid;
    grid-template-columns: auto 1fr auto auto;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    transition: background-color 0.2s ease, border-color 0.2s ease;
    cursor: pointer;
}

.segment-item:hover {
    background-color: var(--color-background-alt);
    border-color: var(--color-primary-light);
}

/* Oculta o checkbox padrão e usa o label como o novo checkbox visual */
.segment-checkbox input[type="checkbox"] {
    display: none;
}

.segment-checkbox .checkbox-visual {
    width: 20px;
    height: 20px;
    border: 2px solid var(--color-border);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.segment-checkbox .checkbox-visual i {
    font-size: 12px;
    color: white;
    opacity: 0;
    transform: scale(0.5);
    transition: all 0.2s ease;
}

/* Estilo quando o checkbox está marcado */
.segment-checkbox input[type="checkbox"]:checked + .checkbox-visual {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
}

.segment-checkbox input[type="checkbox"]:checked + .checkbox-visual i {
    opacity: 1;
    transform: scale(1);
}

.segment-info strong { font-weight: 600; color: var(--color-text-dark); }
.segment-info span { font-size: 0.875rem; color: var(--color-text-light); }
.segment-duration { font-weight: 600; font-size: 0.875rem; background-color: var(--color-border); padding: 4px 10px; border-radius: 20px; color: var(--color-text-dark); }

/* --- CONTROLES DO DECK REMOVIDOS --- */
.deck-controls {
    display: none;
}

/* --- BOTÃO PLAY (POLIDO) --- */
.btn-preview {
    background: var(--color-background);
    color: var(--color-text-light);
    border: 1px solid var(--color-border);
    border-radius: 50%;
    width: 38px; height: 38px;
    cursor: pointer;
    transition: all 0.2s ease;
    /* Centralização perfeita do ícone */
    display: inline-flex;
    align-items: center;
    justify-content: center;
}
.btn-preview:hover { background-color: var(--color-primary); color: white; border-color: var(--color-primary); transform: scale(1.1); }
.btn-preview:active { transform: scale(0.95); }
.btn-preview .fas { font-size: 0.9rem; }

/* --- OPÇÕES ADICIONAIS (PASSO 2) --- */
.additional-options { margin-top: 24px; }
.form-group { margin-bottom: 20px; }
.form-group label { color: var(--color-text-dark); font-weight: 600; }
.form-select { background-color: var(--color-background); }
.form-check-wrapper { display: flex; align-items: center; gap: 12px; background-color: var(--color-background); padding: 15px; border-radius: 12px; cursor: pointer; border: 1px solid var(--color-border); }
.form-check-input { width: 1.2em; height: 1.2em; accent-color: var(--color-primary); }
.form-check-info .form-check-title { font-weight: 600; color: var(--color-text-dark); }

/* --- FOOTER DO PAINEL --- */
.panel-footer {
    padding-top: 20px;
    border-top: 1px solid var(--color-border);
    margin-top: auto;
}
.usage-alert { background-color: var(--color-secondary); color: var(--color-primary); padding: 12px; border-radius: 8px; text-align: center; margin-bottom: 16px; font-weight: 600; }
[data-theme="dark"] .usage-alert { background-color: rgba(101, 91, 226, 0.15); }

/* --- ÁREA DE PREVIEW --- */
.editor-preview {
    background-color: transparent;
    display: flex; align-items: center; justify-content: center;
    padding: 0;
    position: relative; z-index: 1;
    min-height: 400px;
}
.preview-content-wrapper { width: 100%; height: 100%; border-radius: 24px; overflow: hidden; box-shadow: var(--shadow-xl); border: 1px solid var(--color-border); background-color: var(--color-background-alt); display: flex; align-items: center; justify-content: center; }
.video-preview-wrapper { position: relative; width: 100%; height: 100%; background-color: #000; }
#youtube-player { width: 100%; height: 100%; }

/* --- PLACEHOLDER E LOADING --- */
.preview-placeholder, .loading-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 20px; transition: opacity 0.3s ease, visibility 0.3s ease; z-index: 3; padding: 20px; text-align: center; }
.loading-overlay { background: rgba(249, 250, 251, 0.7); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); z-index: 10; display: none; }
[data-theme="dark"] .loading-overlay { background: rgba(10, 16, 28, 0.7); }
.preview-placeholder { z-index: 5; }
.preview-placeholder:not(.active) { opacity: 0; visibility: hidden; }
.loading-spinner { width: 50px; height: 50px; border: 4px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 1s linear infinite; }
.loading-text { font-size: 1.2rem; font-weight: 600; color: var(--color-text-dark); }
.preview-placeholder .icon { font-size: 5rem; margin-bottom: 15px; color: var(--color-border); }
.preview-placeholder h3 { font-size: 1.5rem; font-weight: 700; color: var(--color-text-dark); }
.preview-placeholder p { color: var(--color-text-light); }
.preview-content { width: 100%; height: 100%; display: none; }
.preview-content.active { display: block; }

/* --- RESPONSIVIDADE (CORRIGIDA) --- */
@media (max-width: 992px) {
    .editor-layout {
        grid-template-columns: 1fr; /* Empilha as colunas */
        height: auto;
        padding: 15px;
        gap: 15px;
    }
    .editor-panel {
        min-height: 500px;
    }
    .editor-preview {
        min-height: 350px;
    }
}
