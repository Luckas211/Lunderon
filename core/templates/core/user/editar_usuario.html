{% extends 'core/base.html' %}
{% load static %}

{% block title %}Editar Usu√°rio - L.E DARK{% endblock %}

{% block content %}
<div class="admin-dashboard">

    <aside class="sidebar">
        <h2 class="sidebar-logo">L.E DARK</h2>
        <nav>
            <ul>
                <li><a href="{% url 'admin_assinaturas' %}">üìã Assinaturas</a></li>
                <li><a href="{% url 'admin_usuarios' %}" class="active">üë• Usu√°rios</a></li>
                <li><a href="{% url 'admin_configuracoes' %}">‚öôÔ∏è Configura√ß√µes</a></li>
                <li><a href="{% url 'admin_pagamentos' %}">üí≥ Pagamentos</a></li>
                <li><a href="{% url 'admin_relatorios' %}">üìä Relat√≥rios</a></li>
            </ul>
        </nav>
    </aside>

    <main class="dashboard-content">
        <header class="dashboard-header">
            <h1>Editar Usu√°rio: {{ usuario_editando.username }}</h1>
        </header>

        <section class="form-container" style="background-color: #2a2a2a; padding: 25px; border-radius: 8px;">
            <form method="POST">
                {% csrf_token %}

                <fieldset style="border: 1px solid #444; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
                    <legend style="padding: 0 10px; color: #fff;">Dados da Conta</legend>
                    <p><strong>Data de Cadastro:</strong> {{ usuario_editando.date_joined|date:"d/m/Y H:i" }}</p>
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; color: #ccc;">{{ form.username.label }}</label>
                        {{ form.username }}
                    </div>
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; color: #ccc;">{{ form.email.label }}</label>
                        {{ form.email }}
                    </div>
                    <div class="form-group" style="margin-bottom: 20px; display: flex; align-items: center;">
                        {{ form.is_staff }}
                        <label for="{{ form.is_staff.id_for_label }}" style="margin-left: 10px; color: #ccc;">{{ form.is_staff.label }}</label>
                    </div>
                </fieldset>

                <fieldset style="border: 1px solid #444; padding: 20px; border-radius: 5px;">
                    <legend style="padding: 0 10px; color: #fff;">Gerenciar Assinatura</legend>
                    {% if assinatura %}
                        <p><strong>Assinatura Expira em:</strong> {{ assinatura.data_expiracao|date:"d/m/Y" }}</p>
                    {% endif %}
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; color: #ccc;">{{ form.plano.label }}</label>
                        {{ form.plano }}
                    </div>
                     <div class="form-group" style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; color: #ccc;">{{ form.status.label }}</label>
                        {{ form.status }}
                    </div>
                </fieldset>
                
                {% if form.errors %}
                <div class="form-errors" style="color: #ff6b6b; margin-top: 15px;">
                    <p>Por favor, corrija os erros abaixo:</p>
                    {{ form.errors }}
                </div>
                {% endif %}
                
                <div style="margin-top: 25px;">
                    <button type="submit" class="btn-action edit">Salvar Altera√ß√µes</button>
                    <a href="{% url 'admin_usuarios' %}" class="btn-action cancel">Cancelar</a>
                </div>
            </form>
        </section>
    </main>
</div>
{% endblock %}